# open-social-distributor

**UNDER DEVELOPMENT**

A tool for managing social posts across multiple platforms. Simple to configure. Offers a CLI for basic configuration and message posting. Optionally run a scheduled service as a Docker container or as an AWS Lambda stack.

## CLI options

```text
-c, --config     Required. Path to the config file.
-m, --message    Required. Simple message text.
--help           Display this help screen.
--version        Display version information.
```

## Config format

```jsonc
{
    "networks": [
        "type=console;code=<SHORTCODE>",
        "type=mastodon;code=<SHORTCODE>;instance=<INSTANCE>;token=<TOKEN>",
        // etc.
    ]
}
```

Each entry in the `networks` list is a connection string describing how to connect to a single social network account.

Connection strings are parsed by the `NetworkFactory` class.

### Console connection strings

```text
type=console
```

Console is the simplest of the 'social networks' - instead of connecting to a network, it simply prints any messages it has been asked to post to the console or log.

Console is the only "network" that does not require you to specify a shortcode. You should not create more than one instance of console.

### Mastodon connection strings

```text
type=mastodon;code=<SHORTCODE>;instance=<INSTANCE>;token=<TOKEN>
```

A mastodon connection string describes a connection to an account on a specific mastodon server.

* `SHORTCODE` - a unique code to refer to the social network instance, this will appear in logs
* `INSTANCE` - the mastodon server's domain name (eg. `mastodon.social`)
* `TOKEN` - access token, generated in mastodon developer options

Ensure that the _write_ permissions are granted for your access token.

### Facebook connection strings

```text
type=facebook;code=<SHORTCODE>;mode=page;page_id=<PAGE_ID>;page_token=<PAGE_TOKEN>
type=facebook;code=<SHORTCODE>;mode=user;user_token=<USER_TOKEN>
```

* `SHORTCODE` - a unique code to refer to the social network instance, this will appear in logs
* `MODE` - One of `Page|User` (case insensitive)

#### `Page` mode

* `PAGE_ID` - Id of the page to post to
* `PAGE_TOKEN` - A [page access token](https://developers.facebook.com/docs/pages/access-tokens) generated by a user able to perform the `CREATE_CONTENT` task on the page, with permissions: `pages_manage_posts`, `pages_read_engagement`

#### `User` mode (not yet implemented)

* `USER_TOKEN` - A user access token (details TBC)

## TODOs

- [x] Self-test during startup
- [x] Social network configuration (connection strings)
- [ ] Publishing code for social networks
    - [ ] Discord
    - [ ] Twitter(?)
    - [x] Mastodon
    - [ ] Facebook
    - [ ] LinkedIn
- [ ] Document CSV structure
- [ ] Have Discord indicate status of other posts
- [ ] Add scheduled event trigger
- [ ] Create CLI distribution option

## Build and deploy scripts

* `open-social-distributor-app/export-defaults.sh` - defaults for `PROFILE` (AWS CLI), and `STACK_NAME` (CloudFormation stack)
* `open-social-distributor-app/build-functions.sh` - builds all functions in this project
* `open-social-distributor-app/dev-sync-app.sh` - synchronises all functions in this project with an AWS CloudFormation stack

## Testing scripts

* `open-social-distributor-app/build-unit-tests.sh` - builds all unit tests in this project
* `open-social-distributor-app/run-unit-tests.sh` - runs all unit tests in this project
